<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>看背App</title>

    <script type="text/javascript">
        function trans() { 
            form.action = "trans"; 
            form.submit(); 
        }

        let clickCount = 0;
        function incrementAndSubmit() {
            // 递增点击次数
            clickCount++;
            // 向后台发送递增的ID
            sendToBackend(clickCount);
        }

        function sendToBackend(id) {
          fetch('http://127.0.0.1:8899/incrementAndSubmit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ id: id }),
            })
            .then(response => response.text())
            .then(html => {
                // 将后端返回的 HTML 插入到 iframe 中
                document.getElementById('iframe').srcdoc = html;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script>
</head>
<body>
    <form name="form" id="form" action="trans" method="POST" target="iframe">
        <label id="lab1">请输入：</label>
        <input type="search" name="txt" size="30" placeholder="请输入word">
        <input type="button" name="btn1" onclick="trans();" value="英译汉">
        <input type="button" name="btn2" onclick="incrementAndSubmit();" value="Click me">
    </form>
    <p></p>


    <div id="result">
      <iframe name="iframe" id="iframe" width="90%" height="400"></iframe>
    </div>

</body>
</html>
